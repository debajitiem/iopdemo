ext.brokerFile = file('broker.properties')

 task loadbroker {

   String[] brokerElems
   Properties brokers = readBrokers()

   def INODE = 0
   def HOST = 1
   def PORT = 2
   def EXGRP = 3

   brokers.each{key, value ->

     brokerElems = value.split(':')

     //ant.mdeploy(inode: brokerElems(INODE), hostname: brokerElems(HOST), port: //brokerElems(PORT), execgroup: brokerElems(EXGRP))

     //println(key)

     //for(String s : brokerelems) { println(s)}
     //println()

   }
}

  Properties readBrokers() {

   logger.quiet 'Reading the brokers file.'

   if (!ext.brokerFile.exists()) {
       throw new GradleException(
       "Required broker file does not exist: $brokerFile.canonicalPath")
   }
   Properties brokerProps = new Properties()
   brokerFile.withInputStream { stream -> brokerProps.load(stream) }
    return brokerProps
 }
